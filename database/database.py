import sqlite3

conn = sqlite3.connect("product_reviews.db")
cursor = conn.cursor()

cursor.execute("""
CREATE TABLE IF NOT EXISTS reviews (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  reviewer_name TEXT NOT NULL,
  rating INTEGER NOT NULL CHECK (rating BETWEEN 1 AND 5),
  title TEXT NOT NULL,
  text TEXT NOT NULL,
  is_verified BOOLEAN NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
)
""")

cursor.execute("""
CREATE TABLE IF NOT EXISTS questions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_name TEXT NOT NULL,
  title TEXT NOT NULL,
  text TEXT NOT NULL,
  is_question BOOLEAN NOT NULL DEFAULT 1,
  parent_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  FOREIGN KEY (parent_id) REFERENCES questions(id)
)
""")

sample_reviews = [
  ('Айжан К.', 5, 'Отличный продукт', 'Качественная кислота, быстрая доставка, все как обещали.', 1, '2025-05-01 10:00:00'),
  ('Бекзат М.', 4, 'Хорошее качество', 'Продукт хороший, но упаковка могла быть прочнее.', 1, '2025-05-02 12:30:00'),
  ('Динара С.', 5, 'Рекомендую', 'Использую для лабораторных целей, все отлично.', 0, '2025-05-03 15:45:00'),
  ('Ерлан Т.', 3, 'Нормально', 'Качество нормальное, но доставка задержалась.', 1, '2025-05-04 09:20:00'),
  ('Жулдыз А.', 5, 'Супер', 'Очень довольна покупкой, буду заказывать еще.', 1, '2025-05-05 11:10:00'),
  ('Кайрат Ж.', 4, 'Почти идеально', 'Продукт хороший, но цена немного высокая.', 0, '2025-05-06 14:00:00'),
  ('Ляззат Б.', 5, 'Лучший выбор', 'Надежная упаковка, быстрая доставка.', 1, '2025-05-07 16:30:00'),
  ('Мади Н.', 2, 'Ожидал большего', 'Качество среднее, быстро израсходовалась.', 0, '2025-05-08 08:50:00'),
  ('Нурлан О.', 5, 'Все супер', 'Продукт оправдал ожидания, рекомендую.', 1, '2025-05-09 13:20:00'),
  ('Ольга П.', 4, 'Хорошо', 'Качество хорошее, но инструкция неполная.', 1, '2025-05-10 17:40:00'),
  ('Рустем К.', 5, 'Превосходно', 'Отличный концентрат для работы.', 1, '2025-05-11 10:15:00'),
  ('Салтанат Е.', 3, 'Средне', 'Продукт нормальный, но доставка долгая.', 0, '2025-05-12 12:00:00'),
  ('Тимур В.', 5, 'Идеально', 'Все как в описании, быстро доставили.', 1, '2025-05-13 14:50:00'),
  ('Улжан Д.', 4, 'Неплохо', 'Качество хорошее, но немного дороговато.', 1, '2025-05-14 09:30:00'),
  ('Фариза М.', 5, 'Отлично', 'Продукт высокого качества, все понравилось.', 1, '2025-05-15 16:20:00'),
  ('Хасан Ш.', 1, 'Не рекомендую', 'Качество низкое, быстро испортилась.', 0, '2025-05-16 11:00:00'),
  ('Шолпан З.', 5, 'Замечательно', 'Очень довольна, буду заказывать снова.', 1, '2025-05-17 15:30:00'),
  ('Эльдар А.', 4, 'Хороший товар', 'Продукт хороший, но упаковка слабая.', 1, '2025-05-18 08:40:00'),
  ('Юлия Л.', 5, 'Проверено', 'Качество отличное, доставка быстрая.', 1, '2025-05-19 13:10:00'),
  ('Ярослав И.', 3, 'Можно лучше', 'Продукт средний, ожидал большего.', 0, '2025-05-20 10:00:00')
]

cursor.executemany("""
INSERT INTO reviews (reviewer_name, rating, title, text, is_verified, created_at)
VALUES (?, ?, ?, ?, ?, ?)
""", sample_reviews)

sample_questions = [
  ('Азамат', 'Можно ли хранить в гараже?', 'Подходит ли серная кислота для гаражного хранения?', 1, None, '2025-05-01 18:00:00'),
  ('Лаборант', 'Re: Хранение в гараже', 'Храните в прохладном, сухом месте, вдали от влаги и горючих материалов.', 0, 1, '2025-05-02 09:30:00'),
  ('Гульнара', 'Какой срок годности?', 'Как долго можно хранить кислоту?', 1, None, '2025-05-03 14:20:00'),
  ('Лаборант', 'Re: Срок годности', 'При правильном хранении срок годности не ограничен.', 0, 3, '2025-05-04 10:00:00'),
  ('Дамир', 'Безопасно ли для дома?', 'Можно ли использовать дома для мелких работ?', 1, None, '2025-05-05 11:50:00'),
  ('Лаборант', 'Re: Безопасность дома', 'Используйте с осторожностью, в хорошо проветриваемом помещении, с защитным оборудованием.', 0, 5, '2025-05-06 08:30:00'),
  ('Екатерина', 'Какой объем выбрать?', 'Какой объем лучше для лабораторных нужд?', 1, None, '2025-05-07 16:00:00'),
  ('Лаборант', 'Re: Выбор объема', 'Для лабораторий рекомендуем 1–5 литров в зависимости от частоты использования.', 0, 7, '2025-05-08 12:10:00'),
  ('Жанар', 'Проблемы с доставкой', 'Почему доставка задерживается?', 1, None, '2025-05-09 09:40:00'),
  ('Поддержка', 'Re: Проблемы с доставкой', 'Извините за задержку, свяжитесь с нами для уточнения статуса заказа.', 0, 9, '2025-05-10 11:00:00')
]

cursor.executemany("""
INSERT INTO questions (user_name, title, text, is_question, parent_id, created_at)
VALUES (?, ?, ?, ?, ?, ?)
""", sample_questions)

conn.commit()
conn.close()
